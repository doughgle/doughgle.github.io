<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.107.0"><link rel=icon href=/images/icon.jpg><title>Docs-as-code Build Pipeline Explained: From Crazy to Consistent | Douglas Hellinger</title><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://www.douglashellinger.com/explainer/docs-as-code-build-pipeline-explained/simple-docs-as-code-build-pipeline-cover.drawio.svg"><meta name=twitter:title content="Docs-as-code Build Pipeline Explained: From Crazy to Consistent"><meta name=twitter:description content="Here&rsquo;s an example docs-as-code build pipeline. It describes a process for checking and testing documentation written in markdown format. After committing and pushing markdown changes to Github, the pipeline will run."><meta property="og:title" content="Docs-as-code Build Pipeline Explained: From Crazy to Consistent"><meta property="og:description" content="Here&rsquo;s an example docs-as-code build pipeline. It describes a process for checking and testing documentation written in markdown format. After committing and pushing markdown changes to Github, the pipeline will run."><meta property="og:type" content="article"><meta property="og:url" content="https://www.douglashellinger.com/explainer/docs-as-code-build-pipeline-explained/"><meta property="og:image" content="https://www.douglashellinger.com/explainer/docs-as-code-build-pipeline-explained/simple-docs-as-code-build-pipeline-cover.drawio.svg"><meta property="article:section" content="explainer"><meta property="article:published_time" content="2023-03-20T04:44:36+08:00"><meta property="article:modified_time" content="2023-03-05T16:44:36+08:00"><link href=https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css rel=stylesheet integrity=sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T crossorigin=anonymous><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.0.13/css/all.css integrity=sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp crossorigin=anonymous><link href="https://fonts.googleapis.com/css?family=Righteous%7CMerriweather:300,300i,400,400i,700,700i" rel=stylesheet><link rel=stylesheet href=https://www.douglashellinger.com/css/medium.a3d5489836b19de22a81ddc6bd21c17547d07529e67b266427378a04fa3ea727.css integrity="sha256-o9VImDaxneIqgd3GvSHBdUfQdSnmeyZkJzeKBPo+pyc="><link rel=stylesheet href=https://www.douglashellinger.com/css/additional.8819b6defcdc6d21280f9b402b00df87ca779135901de6c22e708c62e20184b9.css integrity="sha256-iBm23vzcbSEoD5tAKwDfh8p3kTWQHebCLnCMYuIBhLk="></head><body><nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top mediumnavigation nav-down"><div class="container pr-0"><a class=navbar-brand href=https://www.douglashellinger.com/><img src=/images/icon.jpg alt=logo></a>
<button class=navbar-toggler type=button data-toggle=collapse data-target=#navbarMediumish aria-controls=navbarSupportedContent aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarMediumish><ul class="navbar-nav ml-auto"><li class=nav-item><a class=nav-link href=/blog>Blog</a></li><li class=nav-item><a class=nav-link href=/explainer>Explainers</a></li><li class=nav-item><a class=nav-link href=/how-to>How to Guides</a></li><li class=nav-item><a class=nav-link href=/>About</a></li></ul></div></div></nav><div class=site-content><div class=container><div class=mainheading><h1 class=sitetitle>Douglas Hellinger</h1><p class=lead>Helping you have fun and maximise impact by learning containers and kubernetes!</p></div><div class=main-content><div class=container><div class=row><div class="col-md-2 pl-0"><div class="share sticky-top sticky-top-offset"><p>Share</p><ul><li class="ml-1 mr-1"><a target=_blank href="https://twitter.com/intent/tweet?text=Docs-as-code%20Build%20Pipeline%20Explained%3a%20From%20Crazy%20to%20Consistent&url=https%3a%2f%2fwww.douglashellinger.com%2fexplainer%2fdocs-as-code-build-pipeline-explained%2f" onclick='return window.open(this.href,"twitter-share","width=550,height=435"),!1'><i class="fab fa-twitter"></i></a></li><li class="ml-1 mr-1"><a target=_blank href="https://facebook.com/sharer.php?u=https%3a%2f%2fwww.douglashellinger.com%2fexplainer%2fdocs-as-code-build-pipeline-explained%2f" onclick='return window.open(this.href,"facebook-share","width=550,height=435"),!1'><i class="fab fa-facebook-f"></i></a></li><li class="ml-1 mr-1"><a target=_blank href="https://www.xing.com/spi/shares/new?url=https%3a%2f%2fwww.douglashellinger.com%2fexplainer%2fdocs-as-code-build-pipeline-explained%2f" onclick='return window.open(this.href,"xing-share","width=550,height=435"),!1'><i class="fab fa-xing"></i></a></li></ul><div class=sep></div><ul><li><a class="small smoothscroll" href=#disqus_thread></a></li></ul></div></div><div class="col-md-9 flex-first flex-md-unordered"><div class=mainheading><div class="row post-top-meta"><div class="col-xs-12 col-md-3 col-lg-2 text-center text-md-left mb-4 mb-md-0 md-nopad-right"><img class=author-thumb src=/images/profile.jpg alt="Douglas Hellinger"></div><div class="col-xs-12 col-md-9 col-lg-10 text-center text-md-left md-nopad-left"><a target=_blank class=link-dark>Douglas Hellinger</a><br><span class=author-description>Creator of this blog.<br><i class="far fa-star"></i>
Mar 20, 2023
<i class="far fa-clock clock"></i>
10 min read</span></div></div><h1 class=posttitle>Docs-as-code Build Pipeline Explained: From Crazy to Consistent</h1></div><img class="featured-image img-fluid" src=https://www.douglashellinger.com/explainer/docs-as-code-build-pipeline-explained/simple-docs-as-code-build-pipeline-cover.drawio.svg alt="thumbnail for this post"><div class=article-post><p>Here&rsquo;s an example docs-as-code build pipeline. It describes a process for checking and testing documentation written in markdown format. After committing and pushing markdown changes to Github, the pipeline will run. The output of the build pipeline is a complete static HTML site.</p><p>Let&rsquo;s examine some tools and techniques of the docs as code build pipeline&mldr;</p><h2 id=1-show-tool-versions>1. Show Tool Versions</h2><p>The first stage of the pipeline prints a complete list of tool versions. You can apply this on any pipeline. Keep it short and consistent - one tool and version per line. If your build tool has a bunch of plugins, show their versions too. Like this:</p><p><img src=show-tool-versions.png alt="screenshot of a Show Tool Versions stage in a build pipeline" title="the engineer eats low hanging fruits first"></p><p>If your build and deployment pipelines don&rsquo;t have that, do it! I learnt this technique from Elton Stoneman in the <a href=https://www.pluralsight.com/courses/using-declarative-jenkins-pipelines>Using Declarative Jenkins Pipelines course</a>.</p><p>Besides a code-under-build bug or the CI server bonking, tool upgrades are a common reason for build failures. A Show Tool Versions stage enables you to see if a tool upgrade introduced a build failure. Simply find the builds before and after it started failing and compare the tool versions.</p><p>Its a useful technique because it reduces your anxiety about making that upgrade. It enables you to keep your build and deploy tools fresh. It enables you escape from making &ldquo;chore: bump version to v0.1.977&rdquo; commits and arrive at a place where a dependabot does that for you.</p><p>And, if you&rsquo;re using builder containers, you can simply rollback to a previous image version.</p><h2 id=2-check-spelling>2 Check Spelling</h2><p>This stage uses <a href=https://github.com/lukeapage/node-markdown-spellcheck><code>mdspell</code></a> to check for spelling errors.
Interacting with it on the command line looks like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ mdspell --report <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --en-gb <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --ignore-numbers <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --ignore-acronyms <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  <span style=color:#e6db74>&#39;**/*.md&#39;</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>blog/creating-a-docs-as-code-pipeline/index.md
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>15</span> | Inspired by the practical how tos on <span style=color:#f92672>[</span>docslikecode.com<span style=color:#f92672>](</span>https:/ 
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>15</span> |  by the practical how tos on <span style=color:#f92672>[</span>docslikecode.com<span style=color:#f92672>](</span>https://www.docslikecode.com 
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>17</span> | I had a conversation with chatgpt on this. The back and forth e 
</span></span></code></pre></div><p>Frankly there are too many false positives for technical writing.
I just spent over an hour on an interactive <code>mdspell</code> check, adding words to the dictionary and others to ignore. Its not hard to imagine the need to repeat that every time you mention the latest <code>foobar.io</code> tool. The dictionary will be the hottest file on the heatmap. In the age of AI, computers are laughing when humans do something like this!</p><p>My recommendation would be to use an in IDE spell checker, pre-commit and just eyeball the squigglies.
I&rsquo;ll be removing <code>mdspell</code> from the pipeline soon&mldr;</p><h2 id=3-check-prose>3 Check Prose</h2><p>Tools like the <a href=https://hemingwayapp.com/>Hemingway Editor</a> give feedback on your prose. The Hemingway editor is an online interactive editor that grades your prose by school reading age. It shows Readability as Grade 6 to 18, where lower is generally better. It follows simple rules, and highlights parts of the prose that make it hard to read or less impactful.</p><hr><p><img src=hemingway-editor.png alt="example of feedback on prose using Hemingway Editor" title="Hemingway Editor: my writing was flagged for passive voice violations"></p><hr><p>Inspired by <a href=https://www.udemy.com/course/writing-for-business/>Writing With Confidence</a>, I wanted to get this type of feedback integrated into a build pipeline.</p><p>One tool that can help with this is <code>write-good</code>.</p><p><a href=https://github.com/btford/write-good><code>write-good</code></a> helps with highlighting:</p><ul><li>adverbs, which can weaken meaning. Prefer a forceful verb.</li><li>passive voice, which can make the writing distant and less engaging.</li><li>wordy phrases, which can make the sentence too complex to digest.</li></ul><p>Interacting with it on the command line looks like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ write-good <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  blog/explainer-using-the-1000-most-used-english-words/index.md
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>In blog/explainer-using-the-1000-most-used-english-words/index.md
</span></span><span style=display:flex><span><span style=color:#f92672>=============</span>
</span></span><span style=display:flex><span> explain something using only the <span style=color:#ae81ff>1000</span> most-used English words.
</span></span><span style=display:flex><span>                         ^^^^
</span></span><span style=display:flex><span><span style=color:#e6db74>&#34;only&#34;</span> can weaken meaning on line <span style=color:#ae81ff>10</span> at column <span style=color:#ae81ff>150</span>
</span></span><span style=display:flex><span>-------------
</span></span><span style=display:flex><span>hinking about what might benefit from a plain English explanation.
</span></span><span style=display:flex><span>                         ^^^^^^^^^^^^
</span></span><span style=display:flex><span><span style=color:#e6db74>&#34;benefit from&#34;</span> is wordy or unneeded on line <span style=color:#ae81ff>12</span> at column <span style=color:#ae81ff>36</span>
</span></span><span style=display:flex><span>-------------
</span></span><span style=display:flex><span>ased Encryption <span style=color:#f92672>(</span>ABE<span style=color:#f92672>)</span>. I was excited by what I learned. I wrote carefully, trying
</span></span><span style=display:flex><span>                         ^^^^^^^^^^^
</span></span><span style=display:flex><span><span style=color:#e6db74>&#34;was excited&#34;</span> may be passive voice on line <span style=color:#ae81ff>14</span> at column <span style=color:#ae81ff>85</span>
</span></span><span style=display:flex><span>-------------
</span></span></code></pre></div><p>As an noob writer, I frequently make those mistakes, so those checks really help me.
One thing missing from <code>write-good</code> is the overall readability grade. Another is the coloured highlights for hard to read and very hard to read sentences.</p><p>You might consider bringing prose feedback to the IDE too, where you can eyeball the highlights.
For docs with multiple contributors though, you might wanna fail the CI build if the Readability (lower is better) goes above Grade 9.</p><h2 id=4-lint-markdown>4 Lint Markdown</h2><p><code>markdownlint</code> highlights the fluff in your markdown.
It can help with standardising the source markdown to make it easier for writing and editing. The whole docs codebase can look like its written by one person. The reduced variability reduces extraneous cognitive load. You can focus on the content while your brain sub-consciously parses the familiar structure.</p><p><a href=https://github.com/DavidAnson/markdownlint-cli2><code>markdownlint-cli2</code></a> is a CLI for markdown lint that doesn&rsquo;t follow standard posix options. Instead, its configured using a configuration file. It has a large set of rules that can be enabled/disabled and configured.
In particular, it has rules to check for multiple blank lines, line length, inline HTML and emphasis style.</p><p>It highlights the file and line number where rules are broken in a parsable format so you can Ctrl+click straight to the problem and fix it. Even better, <code>markdownlint-cli2-fix</code> auto-fixes most of them for you.</p><p>Interacting with <code>markdownlint-cli2</code> on an example markdown article looks like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ markdownlint-cli2 <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  index.md
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>markdownlint-cli2 v0.6.0 <span style=color:#f92672>(</span>markdownlint v0.27.0<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>Finding: index.md
</span></span><span style=display:flex><span>Linting: <span style=color:#ae81ff>1</span> file<span style=color:#f92672>(</span>s<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>Summary: <span style=color:#ae81ff>16</span> error<span style=color:#f92672>(</span>s<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>index.md:26 MD012/no-multiple-blanks Multiple consecutive blank lines <span style=color:#f92672>[</span>Expected: 1; Actual: 2<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>index.md:31 MD012/no-multiple-blanks Multiple consecutive blank lines <span style=color:#f92672>[</span>Expected: 1; Actual: 2<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>index.md:38 MD012/no-multiple-blanks Multiple consecutive blank lines <span style=color:#f92672>[</span>Expected: 1; Actual: 2<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>index.md:39 MD012/no-multiple-blanks Multiple consecutive blank lines <span style=color:#f92672>[</span>Expected: 1; Actual: 3<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>index.md:49 MD012/no-multiple-blanks Multiple consecutive blank lines <span style=color:#f92672>[</span>Expected: 1; Actual: 2<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>index.md:64 MD012/no-multiple-blanks Multiple consecutive blank lines <span style=color:#f92672>[</span>Expected: 1; Actual: 2<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>index.md:67:412 MD037/no-space-in-emphasis Spaces inside emphasis markers <span style=color:#f92672>[</span>Context: <span style=color:#e6db74>&#34;** Cloud**&#34;</span><span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>index.md:85 MD012/no-multiple-blanks Multiple consecutive blank lines <span style=color:#f92672>[</span>Expected: 1; Actual: 2<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>index.md:107 MD035/hr-style Horizontal rule style <span style=color:#f92672>[</span>Expected: ***; Actual: ---<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>index.md:108:3 MD033/no-inline-html Inline HTML <span style=color:#f92672>[</span>Element: a<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>index.md:108:71 MD033/no-inline-html Inline HTML <span style=color:#f92672>[</span>Element: img<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>index.md:108:191 MD033/no-inline-html Inline HTML <span style=color:#f92672>[</span>Element: br<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>index.md:108:197 MD033/no-inline-html Inline HTML <span style=color:#f92672>[</span>Element: span<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>index.md:108:365 MD033/no-inline-html Inline HTML <span style=color:#f92672>[</span>Element: a<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>index.md:108:579 MD033/no-inline-html Inline HTML <span style=color:#f92672>[</span>Element: a<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>index.md:108:705 MD047/single-trailing-newline Files should end with a single newline character
</span></span></code></pre></div><p>Unlike spelling and prose feedback, I believe this type of feedback should get out of the write/edit workflow. That editing is about clarity of expression and not about markdown formatting. One view is that whitespace formatting is a separate commit and can come at the point where multiple authors integrate. Alternatively, you could consider running <code>markdownlint-cli2-fix</code> on a pre-push git hook.</p><p>The drawback that stands out with <code>markdownlint-cli2</code> is the initial investment in configuring the rules. Besides that, it rules!</p><h2 id=5-build-static-site>5 Build Static Site</h2><p><a href=https://gohugo.io/>Hugo</a> produces a complete static HTML site from markdown.</p><p>Its the build stage of the pipeline. The stage that converts input source to a deployable output.</p><p>There are 3 ways to build depending on the stage of the workflow:</p><ol><li>Build and test interactively</li><li>Build a branch to get feedback</li><li>Build a Release Candidate</li></ol><h3 id=51-build-and-test-interactively>5.1. Build And Test Interactively</h3><p>If you use a docs-as-code builder image, you can run it interactively. <strong>Interactive is the fastest feedback!</strong>
See what you&rsquo;re creating as you edit. Especially useful for changes across multiple pages.
Here&rsquo;s the command to launch a hugo server and jump to the page you&rsquo;re editing:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ docker run <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -it --rm <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --name docs <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -v <span style=color:#66d9ef>$(</span>pwd<span style=color:#66d9ef>)</span>:/src <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -p 1313:1313 <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  ghcr.io/doughgle/docs-as-code:main <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  hugo server <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --buildDrafts <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --navigateToChanged
</span></span></code></pre></div><p>From here, you click the link and you&rsquo;re looking at a fully rendered site that navigates to the page you&rsquo;ve changed.</p><p><img src="https://videoapi-muybridge.vimeocdn.com/animated-thumbnails/image/4f06d880-45b6-4451-9102-d8d816943022.gif?ClientID=vimeo-core-prod&Date=1679235418&Signature=dfd86d96581e49cbd5288ff449b405d4a81d8813" alt="Interact with Hugo"></p><h3 id=52-build-a-branch-to-get-feedback>5.2. Build A Branch To Get Feedback</h3><p>In this case, the build makes draft and future-dated pages visible. Its important for feedback because post-build tests will run on the deployable output. If drafts and future-dated content isn&rsquo;t in the deployable output, it won&rsquo;t get tested!</p><p>The <code>draft</code> and <code>publishDate</code> fields in Hugo frontmatter look like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>---
</span></span><span style=display:flex><span><span style=color:#f92672>publishdate</span>: <span style=color:#e6db74>2023-02-05T16:44:36</span><span style=color:#ae81ff>+08</span>:<span style=color:#ae81ff>00</span>
</span></span><span style=display:flex><span><span style=color:#f92672>draft</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>---
</span></span></code></pre></div><p>They allow work in progress to be deployed without being published. Effectively a dark launch of the docs.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ hugo <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --buildDrafts <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --buildFuture
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>  shell: sh -e <span style=color:#f92672>{</span>0<span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>Start building sites … 
</span></span><span style=display:flex><span>hugo v0.107.0-2221b5b30a285d01220a26a82305906ad3291880+extended linux/amd64 BuildDate<span style=color:#f92672>=</span>2022-11-24T13:59:45Z VendorInfo<span style=color:#f92672>=</span>hugoguru
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                  | EN  
</span></span><span style=display:flex><span>-------------------+-----
</span></span><span style=display:flex><span>  Pages            | <span style=color:#ae81ff>39</span>  
</span></span><span style=display:flex><span>  Paginator pages  |  <span style=color:#ae81ff>1</span>  
</span></span><span style=display:flex><span>  Non-page files   | <span style=color:#ae81ff>12</span>  
</span></span><span style=display:flex><span>  Static files     |  <span style=color:#ae81ff>4</span>  
</span></span><span style=display:flex><span>  Processed images |  <span style=color:#ae81ff>0</span>  
</span></span><span style=display:flex><span>  Aliases          | <span style=color:#ae81ff>15</span>  
</span></span><span style=display:flex><span>  Sitemaps         |  <span style=color:#ae81ff>1</span>  
</span></span><span style=display:flex><span>  Cleaned          |  <span style=color:#ae81ff>0</span>  
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Total in <span style=color:#ae81ff>111</span> ms
</span></span></code></pre></div><h3 id=53-build-a-release-candidate>5.3. Build a Release Candidate</h3><p>Finally, build a release candidate identifiable by commit metadata tagged in its source.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>hugo --minify
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>  shell: /usr/bin/bash -e <span style=color:#f92672>{</span>0<span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>Start building sites … 
</span></span><span style=display:flex><span>hugo v0.110.0-e32a493b7826d02763c3b79623952e625402b168+extended linux/amd64 BuildDate<span style=color:#f92672>=</span>2023-01-17T12:16:09Z VendorInfo<span style=color:#f92672>=</span>gohugoio
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                  | EN  
</span></span><span style=display:flex><span>-------------------+-----
</span></span><span style=display:flex><span>  Pages            | <span style=color:#ae81ff>39</span>  
</span></span><span style=display:flex><span>  Paginator pages  |  <span style=color:#ae81ff>1</span>  
</span></span><span style=display:flex><span>  Non-page files   | <span style=color:#ae81ff>12</span>  
</span></span><span style=display:flex><span>  Static files     |  <span style=color:#ae81ff>4</span>  
</span></span><span style=display:flex><span>  Processed images |  <span style=color:#ae81ff>0</span>  
</span></span><span style=display:flex><span>  Aliases          | <span style=color:#ae81ff>15</span>  
</span></span><span style=display:flex><span>  Sitemaps         |  <span style=color:#ae81ff>1</span>  
</span></span><span style=display:flex><span>  Cleaned          |  <span style=color:#ae81ff>0</span>  
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Total in <span style=color:#ae81ff>127</span> ms
</span></span></code></pre></div><p>It wont include drafts. It can include future dated content if that is your strategy. Maybe you have a release train that leaves every Monday at 8pm?
For trunk-based development, this of build step will be done only from <code>master</code> branch.</p><h2 id=6-test-html>6 Test HTML</h2><p><a href=https://github.com/wjdp/htmltest><code>htmltest</code></a> tests the static HTML site for broken links, insecure (http) links, ensures images have alt descriptions and more.</p><p>An example:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ htmltest 
</span></span><span style=display:flex><span>htmltest started at 01:40:36 on public
</span></span><span style=display:flex><span><span style=color:#f92672>========================================================================</span>
</span></span><span style=display:flex><span>how-to/create-a-docs-as-code-build-pipeline/index.html
</span></span><span style=display:flex><span>  Non-OK status: <span style=color:#ae81ff>404</span> --- how-to/create-a-docs-as-code-build-pipeline/index.html --&gt; https://www.garyprovost.com/404
</span></span><span style=display:flex><span>how-to/setup-your-own-vpn-tunnel/index.html
</span></span><span style=display:flex><span>  Non-OK status: <span style=color:#ae81ff>403</span> --- how-to/setup-your-own-vpn-tunnel/index.html --&gt; https://community.openvpn.net/openvpn/wiki/OpenVPN3Linux
</span></span><span style=display:flex><span><span style=color:#f92672>========================================================================</span>
</span></span><span style=display:flex><span>✘✘✘ failed in 23.375607068s
</span></span><span style=display:flex><span><span style=color:#ae81ff>2</span> errors in <span style=color:#ae81ff>41</span> documents
</span></span></code></pre></div><p>In this example, htmltest has detected a (contrived) 404 error in one of the links: a broken link.</p><p>The other link is likely behind a Web Application Firewall and gets a 403 because htmltest fails to prove its a browser. (see [this issue on htmltest])(this issue on htmltest)). To workaround 403 failures originating from a WAF or CAPTCHA, ignore them in the <code>.htmltest.yml</code> config file:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>IgnoreURLs</span>:
</span></span><span style=display:flex><span>- <span style=color:#e6db74>&#34;douglashellinger.com&#34;</span>
</span></span><span style=display:flex><span>- <span style=color:#e6db74>&#34;https://linkedin.com/in/doughellinger&#34;</span>
</span></span><span style=display:flex><span>- <span style=color:#e6db74>&#34;https://videoapi-muybridge.vimeocdn.com/animated-thumbnails/image/&#34;</span>
</span></span><span style=display:flex><span>- <span style=color:#e6db74>&#34;^/misc/js/script.js$&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>IgnoreAltMissing</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span><span style=color:#f92672>IgnoreDirectoryMissingTrailingSlash</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span><span style=color:#f92672>IgnoreCanonicalBrokenLinks</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span><span style=color:#f92672>ExternalTimeout</span>: <span style=color:#ae81ff>5</span>
</span></span></code></pre></div><p>Overall, <code>htmltest</code> is great for catching errors and regressions in nightly builds.</p><hr><h2 id=take-away-the-tao-of-docs-as-code>Take Away The Tao of Docs-as-code</h2><p>Managing docs like code can bring many of the same benefits as managing <em>code</em> like code. For example, standardising language, formatting and style can reduce extraneous cognitive load to make reading and writing easier.</p><p>What Uncle Bob says about the primary value of software is also true about the docs-as-code. The primary value of docs-as-code is it makes documentation soft. Easy to change today and continue to change tomorrow as the volume and complexity grows. Just like code, you can start from hard-coded and soften aspects in response to user requests.</p><p>Treat docs as part of the software product. As the product grows, counter the growth in complexity by evolving a docs as code build pipeline to offload and standardise repetitive parts.</p><p>A build pipeline gives you confidence to restructure parts of the documentation without undetected broken links.</p><p>Its also easy to acknowledge and trace people&rsquo;s contributions. Cloudflare acknowledged that, saying &ldquo;Having our documentation open to external contributions has helped us improve our documentation over time&rdquo;</p><p>Finally, if you enjoy saying &ldquo;shift left&rdquo;, you can enjoy saying it some more for docs! Run tests, review and approve through pull requests, right at the source. You wanna get to know about broken links before publishing. Or every day. Perhaps one of the public links broke? Get to know which site put a paywall, a CAPTCHA, or a WAF in front of your favourite link!</p><hr><p>Thank you for reading this article right to the end.
If you enjoyed it and if you think others can benefit, please like and share.
Or if you foresee a problem, have an alternative solution, or you just wanna share some comments to improve the usefulness of this article, I&rsquo;d appreciate your feedback. You can reach me on LinkedIn.</p></div><div class=after-post-tags><ul class=tags><li><a href=/tags/docs-as-code>docs-as-code</a></li><li><a href=/tags/build-pipeline>build-pipeline</a></li><li><a href=/tags/writing>writing</a></li></ul></div><div class="row PageNavigation d-flex justify-content-between font-weight-bold"><a class="d-block col-md-6 text-lg-right" href=https://www.douglashellinger.com/explainer/what-is-attribute-based-encryption/>What is Attribute Based Encryption? ABE explained using the 1000 most used English words &#187;</a><div class=clearfix></div></div></div></div></div><div class=container><div id=comments class="row justify-content-center mb-5"><div class=col-md-8></div></div></div></div></div><div class="jumbotron fortags"><div class="d-md-flex h-100"><div class="col-md-4 transpdark align-self-center text-center h-100"><div class="d-md-flex align-items-center justify-content-center h-100"><h2 class="d-md-block d-none align-self-center py-1 font-weight-light">Explore <span class="d-none d-md-inline">→</span></h2></div></div><div class="col-md-8 p-5 align-self-center text-center"><a class="mt-1 mb-1" href=/tags/build-pipeline>build-pipeline</a>
<a class="mt-1 mb-1" href=/tags/builder-image>builder-image</a>
<a class="mt-1 mb-1" href=/tags/cloud>cloud</a>
<a class="mt-1 mb-1" href=/tags/containers>containers</a>
<a class="mt-1 mb-1" href=/tags/deployment>deployment</a>
<a class="mt-1 mb-1" href=/tags/docs-as-code>docs-as-code</a>
<a class="mt-1 mb-1" href=/tags/driver>driver</a>
<a class="mt-1 mb-1" href=/tags/encryption>encryption</a>
<a class="mt-1 mb-1" href=/tags/medium>medium</a>
<a class="mt-1 mb-1" href=/tags/security>security</a>
<a class="mt-1 mb-1" href=/tags/thinkpad>thinkpad</a>
<a class="mt-1 mb-1" href=/tags/troubleshooting>troubleshooting</a>
<a class="mt-1 mb-1" href=/tags/ubuntu>ubuntu</a>
<a class="mt-1 mb-1" href=/tags/writing>writing</a></div></div></div><footer class=footer><div class=container><div class=row><div class="col-md-6 col-sm-6 text-center text-lg-left">&copy; Copyright Douglas Hellinger 2022</div><div class="col-md-6 col-sm-6 text-center text-lg-right"><a target=_blank rel=noopener href=https://www.wowthemes.net>Mediumish Theme</a> by WowThemes.net</div></div></div></footer></div><script src=https://code.jquery.com/jquery-3.4.1.min.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js integrity=sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut crossorigin=anonymous></script>
<script src=https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js integrity=sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM crossorigin=anonymous></script>
<script src=https://www.douglashellinger.com/js/mediumish.84218587c174fd40bce82544b98851670f0b124a7324b349c54a4065e2b32ffc.js integrity="sha256-hCGFh8F0/UC86CVEuYhRZw8LEkpzJLNJxUpAZeKzL/w="></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-TEH3VGXMRY"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-TEH3VGXMRY",{anonymize_ip:!1})}</script></body></html>